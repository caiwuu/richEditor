# richEditor
## 注意点
- 节点增加删除，位置移动之后需更新位置
- for循环使用了splice改变原来数组的方法要逆序遍历

## 设计文档

### 通用规则及名词解释：

1. 内容删除：先删除对应vndoe内容，如果内容被删空,进入块级节点检测，根据块级检测结果判断下一步操作。
2. 块级检测：当块级子节点面临节点删除时需要做的一步操作，目的是防止块塌陷。具体步骤是判断当前节点是否为预编辑状态，是则直接删除块。 否则需要判断除了即将删除的节点之外该块级是否还有其他填充内容，如果没有则在endContainer删除（这里不递归）之后里面添加一个br节点，并且标记当前块状态为预编辑状态；如果有则执行删除。光标定位到上一个叶子节点末端。
3. 叶子节点，可供光标定位的最小节点，通常为text节点。
4. 左叶子（上叶子），指同一层级的第一个叶子节点。
5. 右叶子（下叶子），指同一层级的最后一个叶子节点。
6. 节点位置（position）:指节点相对于根节点的层级关系，由符号"-"连接。
7. 光标容器：分为startContainer和endContainer,startContainer和endContainer表示选区开始结束的节点，非选择内容的情况下它们相同且偏移量相同。
8. startoffset,endoffset:选区开始位置和结束位置相对于其容器节点的偏移量;有个特殊的地方,如果容器节点是一个text节点，则偏移量指的是偏移的文字个数；如果是其他dom节点，则表示偏移的是第几个节点。
9. 键盘输入：指输入键盘字符，通俗理解就是键盘敲下什么则输入什么。
10. 聚合输入：键盘敲入和实际输出不一致，如中文拼音打字。


### 内容删除操作

删除分为选区操作和非选区操作两大类：
  
1. 选区操作分为4步：

   1. 开始容器节点内容删除
   2. 开始结束之间节点删除
   3. 结束内容节点删除
   4. 光标定位


## BUG
1. 在windows操作系统下，聚合输入中点击鼠标会上去两个字母，macos系统正常
2. 每次点击页面滚动条会回到顶部